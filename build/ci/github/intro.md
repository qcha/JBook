# Continuous Integration (CI, Непрерывная интеграция)

## Введение
Непрерывная интеграция является ключевым аспектом современной разработки программного обеспечения. Она позволяет разработчикам интегрировать свой код регулярно и автоматически, что существенно улучшает качество и эффективность процесса разработки.

## Зачем это нужно
Когда речь заходит о разработке, особенно о работе в командах, требуется устанавливать правила и стандарты. Для того, чтобы все процессы были налажены, нужно постоянно проверять соответствие установленным стандартам. Помимо этого, у всего есть свои сроки. Тратить целый день на то, чтобы вручную доставить новую версию приложения на сервер - очень дорого.\
\
Например, можно использовать статический анализатор кода, который будет проверять форматирование кода по некоторым правилам. Затем, можно настроить сборку проекта, чтобы убедиться, что код в принципе компилируется. После этого, можно запустить юнит-тесты, а затем и интеграционные. Если хотя бы на одном из этапов что-то пойдет не так, то мы должны узнать, на каком конкретно и почему. Помимо того, что мы должны знать о проблемах, это не должно занимать большое количество нашего времени. Именно с этим помогает непрерывная интеграция.\
\
Таким образом, можно выделить несколько основных целей внедрения CI:

1) Стандартизация процесса развертки
    * Каждый раз выполняется один и тот же алгоритм, но с разными версиями программного обеспечения. В таком случае намного легче производить отладку процессов, на каком этапе и что пошло не так.
2) Улучшение качества кода
    * Непрерывная интеграция подразумевает под собой автоматизацию процессов - юнит-тестирования, интеграционного тестирования, статического анализа кода. Разработчики в таком случае больше работают над кодом, а DevOps задачи их касаются меньше.
3) Свести количество ошибок к минимуму
    * В случае возникновения проблем, разработчик быстро узнает об этом и сможет произвести откат на прошлую версию с помощью системы контроля версий, а затем устранить баг и интегрировать решение в реальном времени. Это также положительно влияет на скорость внедрения нового функционала.

## Как было раньше
Проблема существует уже давно. Как делалось раньше - были определенные скрипты и самописные приложения, которые позволяли упрощать CI/CD процессы. В основном это была ручная, грустная и скучная работа. Очень велика вероятность возникновения проблем: откатиться в случае возникновения проблем можно только вручную, новый функционал добавлять очень проблематично. 

Сегодня существует множество платформ и сервисов, которые позволяют убрать большинство из таких проблем при работе с CI/CD: Gitlab CI, Jenkins, Github Actions и так далее.

## Исполнение задач
Говоря о CI, сразу же мы приходим к мысли, что подобные задачи нужно где-то выполнять. При этом, выполнять так, чтобы мы могли это делать 24 часа в сутки, 7 дней в неделю и получать фидбэк. Здесь мы приходим к тому, что будем использовать так называемые раннеры - приложения, которые исполняют наши задачи на выделенном сервере. 

Как они работают? Основной принцип таков - есть какое-то API, которое позволяет получить информацию о происходящих событиях в удаленном репозитории. Например, попадание коммита в мастер ветку может быть таким событием. Далее, есть некоторые описанные действия (к примеру, сборка проекта), которые должны быть выполнены, если произошло это событие. Запускается задача, исполняется, и результаты докладываются серверу, который предоставляет интерфейс взаимодействия с раннером. 

Таким образом, мы имеем полностью автоматическую систему, которая работает в фоновом режиме, исполняет необходимые действия, а также докладывает о их результате туда, куда нужно.

## Лучшие практики
Везде есть свои лучшие практики. Непрерывная интеграция не стала исключением, поскольку данный процесс сегодня используется повсеместно.

1) Автоматизация сборки
    * Не нужно изобретать велосипед. Уже есть готовые решения для настройки CI. Используйте системы автоматической сборки, такие как Jenkins, Travis CI, GitLab CI или Github Actions, чтобы автоматизировать процесс сборки проекта при каждом изменении. \
   [Подробнее о настройке CI в Github Actions](github_ci.md).
2) Автоматическое тестирование
    * Настройте автоматическое тестирование, которое будет запускаться при каждой сборке. Включите юнит-тесты и интеграционные тесты для проверки работоспособности кода.
3) Использовать контейнеры
    * Используйте контейнерные технологии, такие как Docker и Kubernetes, для создания изолированных сред выполнения. Это даст гарантию, что ваше приложение будет работать одинаково в любом окружении.
4) Использовать систему контроля версий
    * Используйте систему контроля версий, такую как Git, для отслеживания изменений в коде и управления различными версиями. Это позволит вам легко восстановить предыдущие версии кода и отследить историю изменений.
5) Непрерывная доставка (CD, Continuous Delivery)
    * Рассмотрите возможность внедрения практики непрерывной доставки, которая позволит автоматически развертывать ваше решение в производственной среде после успешного прохождения всех тестов.

